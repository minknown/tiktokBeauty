# tiktokbeauty
一个tiktok抖音美女热舞视频的识别和采集 -基于php和易语言和e4a   
**我们的tiktok会随您的喜好给您分配观看视频，但是即便我们爱看美食视频，在刷抖音或者tiktok的时候，十个视频，有6个是美食的，还有部分是和美食无关的，我在想，我们能否建立出一个只有美食的短视频APP呢，或者只有某一类的短视频APP。比如我们可以创建出一个只有的短视频APP、一个只有玩具的的短视频APP、一个只有美女帅哥的的短视频APP、一个只有科技数码的短视频APP，做到垂直分类，投其所好。
对我来讲，做一个简易的短视频APP或许不太难，也就是对视频进行轮播，上滑下滑切换即可。如果您不做太多复杂的功能的话，比如抖音它有抖音商城，同城匹配、直播功能，算法兴趣学习。这些都比较复杂，如果我们只是做一个多视频播放功能，特别简单。  
所以呢，这个项目主要还是没有视频的问题，我们只有从tiktok上抓取视频了，所以我制作了一个自己会通过鼠标触屏刷tiktok的程序，并且程序能识别目前刷到的短视频是否一个美食、或者美女，而且能根据视频的收藏数、点赞数决定是否收录，一旦收录，将会自动下载该视频并保存到指定位置，甚至它还调用了ffmpeg插件为视频增加了新的水印和转码处理！**
****
## 实现方法  
1：本项目需要有php后台和数据库支持，也需要真实的安卓手机的支持和AirDroid运行，我们提供所有的配套程序。其中安卓手机运行tiktok，同时使用AirDroid将手机屏幕投射到电脑上来（电脑也需要安卓AirDroid桌面客户端），同时开启控制模式，在电脑上可以操作和触屏手机。除此之外，您还需要重新在tiktok.e定义我们的鼠标坐标，因为每个电脑包括作者的电脑的分辨率和您的电脑不同，鼠标位置也有所不同。如分析按钮在屏幕的xy坐标，所有鼠标键位配保存在D:\tiktok.ini文件中，需要重新配置请调用键位设置()方法根据指示进行配置即可。  
2：online_video和tiktok_video是抓取的视频保存目录。它们必须新建否则可能运行出错。     
3：index.html是一个短视频程序，基于html和js和php开发，实现了上滑下滑切换视频、视频懒加载的功能。注意这个短视频程序是针对已经采集到的视频的短视频APP。当然目前它只是网页，不是APP。不过足矣使用。  
4：vblog.exe位于dll目录，它是一个音频波段分析程序，通过波段进一步识别短视频的频率，提高视频美女识别的准确性。当然该程序貌似要放置到D盘才能被主程序调用，具体得看我们的易语言PC端源码。  
5：vshop.exe位于dll目录，它是一个PC端的前台信息显示辅助程序，用于显示最新的采集状态和信息等。  
6：post.php是一个tput.apk安卓程序请求得接口，用于创建视频条同时记录视频链接和ID，它会在一个tiktok得数据库表中新建和操作记录。另外post.php也是index.html短视频程序依赖的后端接口。  
7：数据库建表建议和post.php\index.html同个服务器，最好localhost,表结构信息参见mysql-data-list.png。  
8：AI图像人物识别接口由以下提供： https://www.faceplusplus.com/ 务必自行去开通和申请图像识别接口，并更换tiktok.e主程序里面的token。  
9：该程序短视频仅限tiktok,不支持抖音APP，而且版本最好是本项目开发时的tiktok版本，我们准备了可用的版本，详细见本页[关于FolderSyncPro]，它和FolderSyncPro位于同个获取方式或下载链接。另外ffmepg插件用于处理视频，包括增加水印等，建议也使用我们准备好的可用版本，获取方式和下载链接随同本页[关于FolderSyncPro]。   
## 我们解决了[非前台安卓程序无法读取剪辑版]的问题：
TPut.apk位于tput压缩包下，是一个辅助从剪辑版获取视频链接的安卓程序。它解决了非前台安卓程序无法读取剪辑版的问题。  
没错，这是一个突破！  
什么意思呢，我们的刷视频是在真实手机下刷的，这可以避免很多验证码和自动化拦截问题，但是当我们识别出这个视频是我们想要的视频后，我们需要进一步分析和采集它，那么得到这个视频的视频链接特别重要，视频链接持有视频ID编号，我们通过模拟鼠标点击去操作tiktok分析-copylink按钮，当时发现链接复制到了安卓手机剪辑版，但是程序始终无法读取，这是由于此时tiktok程序在前台，我们的Tput程序在后台，根据安卓协议的安全规定，避免后台程序读取剪辑版隐私密码信息，所以非前台程序无法从剪辑版获取内容。但是这个问题，我们最终解决了它。  
TPut.apk的魅力所在！  
TPut.apk将得到的视频编号和链接通过HTTP接口发送给PC端的处理程序，PC端处理程序对视频进行视频下载等其他处理。  
## 关于FolderSyncPro：
FolderSyncPro这个APP安装包是用来同步视频的，在之前我们下载视频模拟电脑的模拟按键，间接操作同个USB链接的手机屏幕，通过点击保存视频按钮，进行下载，但是下载的视频是在手机上的，所以必须使用FolderSyncPro这个软件项电脑磁盘进行同步。  
或许有人问tiktok部分视频没有保存视频的选项，这就是必须使用们提供的tiktok老版本的问题，同时我们提供了市场上的tiktok改版，支持切换国家和强制下载视频。  
但是由于FolderSyncPro的安装包和tiktok的特殊版本安卓包比较大，上传不了github，我将其上传到了我的服务器，注意，这两个APP也是项目必须使用的。  
通过该链接获得他们：http://baidu.com  
*（此链接包括FolderSyncPro、tiktokAPP、ffpemg插件）*
****
## 要点：  
温馨提示1：可跳过动感图片集的短视频，短视频刷着刷着有两种，一些就是普通短视频，另一些是动感图集，我们会自动跳过这些。  
温馨提示2：这是一个美女识别模型的程序，原理是通过图像人物识别接口，通过调用第三方API，得到视频中的人物是否女性，颜值分数，外加以音频波段识别，辅助以点赞数、背景乐等判断是否是一个受欢迎得美女视频，以决定是否采集入库，目前识别准确率在80%左右。  
温馨提示3：我们不排除tiktok升级了，或者tiktok信息获取接口、视频下载接口随着事件得升级发生了不可用或者程序运行不情况，毕竟这是2022年得老项目，但是仅需要做出稍微更改和升级，又能使用了。tiktok信息获取接口、视频下载接口在易语言主程序中又调用，前者用于得到视频标题、收藏数、作者等信息，后者用于下载该视频，
****
## 免责声明：
该程序仅供娱乐和测试和学习，切勿用于商业用途，未经他人或者短视频作者许可，拷贝和分发他人的视频属于盗版违法行为。无论如何，这个项目绝对不会成功，因为它商用的话违法了，互联网上原创是一个根本的宝贵资源。  
但无论如何这套代码值得学习和借鉴，任何技术支持和交流均可和我取得联系！


